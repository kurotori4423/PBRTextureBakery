# PBRTextureBakery

プリンシプルBSDFノードで構成されたマテリアルから、PBRテクスチャをベイクするBlenderアドオン。
Blender2.80以降対応。

# 機能

選択されたオブジェクトに割り当てられているマテリアルからPBRテクスチャを生成します。

- プリンシプルBSDFノード、またはシェーダーミックスノードで構成されたマテリアルから、PBRテクスチャを生成します。
- col:アルベド、met:メタルネス、rgh:ラフネス、nrm：ノーマル、の4種類のPBRテクスチャを生成します
- 1つのオブジェクトに対して複数のマテリアルが割り当たっている場合、すべてのマテリアルをベイクします。

# 使い方
アドオンをインストールするとマテリアルプロパティに「PBRTextureBakery」が追加されます。

## PBRテクスチャのベイク（結合マップなし）

プリンシプルBSDFノードで構成されたマテリアルを用意します。

![](https://user-images.githubusercontent.com/42085932/73548594-6a6b2500-4484-11ea-9774-622fb42cc574.png)

ベイクしたいオブジェクトを選択し、「ファイル名」、「出力先フォルダ」、「解像度」、「ベイクするテクスチャの種類」を設定します。「パラメーターマップとして結合」の項目は後述します。

|設定項目|説明|
|---|---|
|ファイル名|ベイクされるテクスチャの先頭につく名前です。例えば「tex」とした場合、出力されるテクスチャは「tex_col.png」「tex_nrm.png」という名前になります。|
|出力先フォルダ|ベイクされたテクスチャが保存されるフォルダです。|
|解像度|ベイクされたテクスチャが保存されるフォルダです。|
|ベイクするテクスチャの種類|ベースカラー、ノーマルマップ、メタリックマップ、ラフネスマップから、出力したいテクスチャを選択します。|
|余白|テクスチャをベイクする際のマージンです。|

![](https://user-images.githubusercontent.com/42085932/73548671-87075d00-4484-11ea-8132-46de84833c26.png)

「テクスチャを生成」ボタンを押すと指定したフォルダにテクスチャが生成されます。

![](https://user-images.githubusercontent.com/42085932/73549011-1876cf00-4485-11ea-8b00-fbb36362db93.png)


## パラメーターマップとして結合
「結合マップの出力を有効にする」にチェックを入れることで有効になる機能で、ラフネス、スムースネス（ラフネスの反転）、メタリックのパラメーターをそれぞれのチャンネルに割り当てたテクスチャを出力可能です。

例えば、UnityのStandardシェーダーはMetallicに割り当てるテクスチャは、MetallicレベルがRチャンネルによって制御され、Smoothnessレベルはテクスチャのαチャンネルで制御されます。そのため以下のように設定することでこの形式のテクスチャを出力できます。

![](https://user-images.githubusercontent.com/42085932/73548825-c0d86380-4484-11ea-963e-f6a3e89a5a5f.png)

出力されたテクスチャ

![](https://user-images.githubusercontent.com/42085932/73548731-9c7c8700-4484-11ea-8821-77b03c205985.png)

Unityでの見た目

![](https://user-images.githubusercontent.com/42085932/73548846-cc2b8f00-4484-11ea-8f3d-83f95086d778.png)
